<!DOCTYPE html>
<html>
<head>
  <title>Tvse After Party</title>
  <style type="text/css">
    * { margin: 0; padding: 0; border: 0; outline: 0; overflow: hidden; }
    body { width: 100%; height: 100%; position: relative; }
    #ytapiplayer { width: 100%; height: 100%; z-index: 999; }
    #message { display:block; width: 50%; height: 100px; position: absolute; top: 50%; left: 25%; z-index: 1002;
      text-align: center; line-height: 50px; border-radius: 6px;
      color: #333; font-size: 24px; }
    #message p {
      line-height: 32px;
    }
    #msg {
      display: none;
    }
    #sender {
      display: none;
    }
    #sender img {
      vertical-align: top;
      width: 32px; height: 32px;
    }
    #sender span {
      vertical-align: top;
      margin-left: 4px;
      line-height: 32px;
      font-size: 20px;
      font-weight: bold;
      color: #555;
    }
    #background {
      position: relative;
      width: 100%;
      height: 100%;
      background: #000000 url('background.jpg') no-repeat fixed center; 
      background-size: cover;
      z-index: 1000;
    }
  </style>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
  <script type="text/javascript" src="http://dev.tunited.tv/lib/socket.io.js"></script>
</head>
<body>
  <div style="width: 100%; height: 100%;">
    <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; ">
    <div id="background">
      <div id="message">
        <p id="sender"><img src="https://lh4.googleusercontent.com/-za47ko1Puc0/T3tFaAJFSAI/AAAAAAAAADY/CGS4jvbXCBU/w183-h184-no/carlyrae.jpg"><span>Carly Rae Jepsen</span></p>
        <p id="msg">A new music video was requested!</p>
      </div>
    </div>
    </div>
    <div id="ytapiplayer">You need Flash player 8+ and JavaScript enabled to view this video.</div>
  </div>
  <script type="text/javascript">
    var params = { allowScriptAccess: "always" };
    var atts = { id: "myytplayer" };
    swfobject.embedSWF("http://www.youtube.com/apiplayer?enablejsapi=1&version=3",
        "ytapiplayer", "100%", "100%", "8", null, null, params, atts);

    var ytplayer;
    function onYouTubePlayerReady(playerId) {
      ytplayer = document.getElementById("myytplayer");
      //ytplayer.loadVideoById("AIQOzMf31Gk")
    }
  </script>
  <script type="text/javascript">
    var socket = io.connect('http://'+document.domain+':1126/');
    socket.on('host_1111', function (data) {
      $('#message').css('display', 'block');
      $('#msg').css('display', 'block');
      $('#sender').css('display', 'block');
      if (data.sender_photo)
        $('#sender img').attr('src', data.sender_photo);
      if (data.sender_name)
        $('#sender span').text(data.sender_name);
      $('#background').css('display', 'block');
      var opt = {
        videoId: data.videoId,
        startSeconds: parseFloat(data.startSeconds) || 0,
        suggestedQuality: 'large'
      };
      ytplayer.loadVideoById(opt);
      //socket.emit('my other event', { my: 'data' });
      setTimeout(function(){
        $('#message').css('display', 'none'); 
        $('#background').css('display', 'none');
      }, 3000);
    });
  </script>
</body>
</html>
